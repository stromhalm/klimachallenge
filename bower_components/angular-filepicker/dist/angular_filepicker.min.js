"use strict";function filepickerDirective(e,i){return{restrict:"A",scope:{onSuccess:"&"},link:function(r,n,c){n.bind("change",function(i){i.preventDefault(),r.onSuccess({event:i.originalEvent}),e.$apply()}),i.constructWidget(n)}}}function filepickerService(e){return e.filepicker}function filepickerPreviewDirective(e,i){return{restrict:"A",scope:{url:"="},link:function(e,i,r){function n(e){e&&(e=e.replace("api/file/","api/preview/"),t.src=e)}var c=e.url,t=document.createElement("iframe");t.src=c,t.width="100%",t.height="100%",angular.element(i).append(t),e.$watch("url",n)}}}function fpUtilService(){function e(e){var r=[];for(var n in e)e.hasOwnProperty(n)&&("[object Object]"!==Object.prototype.toString.call(e[n])?r.push(n+"="+e[n]):r.push(i(e[n])));return r.join("&")}function i(e){var i=[];for(var r in e)e.hasOwnProperty(r)&&i.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return i.join("&")}return{toParams:e,serialize:i}}function fpConvert(e,i){return function(r,n){var c=e("fpUrlFilter")(r);if(c&&n)return c+"/convert?"+i.toParams(n)}}angular.module("angular-filepicker",[]),window.filepicker=window.filepicker||{},window.filepicker.plugin="angular_js_lib",angular.module("angular-filepicker").directive("filepicker",filepickerDirective),filepickerDirective.$inject=["$rootScope","filepickerService"],angular.module("angular-filepicker").provider("filepicker",function(){this.$get=function(){return window.filepicker},this.setKey=function(e){try{window.filepicker.setKey(e)}catch(i){console.error("Include filepicker.js script")}}}),angular.module("angular-filepicker").service("filepickerService",filepickerService),filepickerService.$inject=["$window"],angular.module("angular-filepicker").directive("filepickerPreview",filepickerPreviewDirective),filepickerPreviewDirective.$inject=["$rootScope","filepickerService"],angular.module("angular-filepicker").service("fpUtilService",fpUtilService),angular.module("angular-filepicker").filter("fpConvert",fpConvert),fpConvert.$inject=["$filter","fpUtilService"],angular.module("angular-filepicker").filter("fpUrlFilter",function(){return function(e){if(!e)return"";var i=["/convert","/metadata","?"];for(var r in i){var n=e.indexOf(i[r]);if(n>-1)return e.substr(0,n)}return e}});